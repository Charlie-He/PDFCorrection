{"ast":null,"code":"import PdfButton from './PdfButton.vue';\nexport default {\n  name: 'PdfUpload',\n  components: {\n    PdfButton\n  },\n  props: {\n    modelValue: {\n      type: [File, null],\n      default: null\n    },\n    accept: {\n      type: String,\n      default: '*'\n    },\n    multiple: {\n      type: Boolean,\n      default: false\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    processing: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['update:modelValue', 'file-select'],\n  data() {\n    return {\n      isDragging: false\n    };\n  },\n  methods: {\n    triggerFileInput() {\n      if (!this.disabled) {\n        this.$refs.fileInput.click();\n      }\n    },\n    handleFileSelect(event) {\n      const file = event.target.files[0];\n      if (file) {\n        this.$emit('update:modelValue', file);\n        this.$emit('file-select', file);\n      }\n      // 重置input的value，确保下次选择相同文件时也能触发change事件\n      event.target.value = '';\n    },\n    handleDrop(event) {\n      if (this.disabled) return;\n      this.isDragging = false;\n      const file = event.dataTransfer.files[0];\n      if (file) {\n        this.$emit('update:modelValue', file);\n        this.$emit('file-select', file);\n      }\n    },\n    handleDragOver() {\n      if (!this.disabled) {\n        this.isDragging = true;\n      }\n    },\n    handleDragLeave() {\n      this.isDragging = false;\n    },\n    removeFile() {\n      if (!this.disabled && !this.processing) {\n        this.$refs.fileInput.value = '';\n        this.$emit('update:modelValue', null);\n      }\n    },\n    formatFileSize(bytes) {\n      if (bytes === 0) return '0 Bytes';\n      const k = 1024;\n      const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\n      return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];\n    }\n  }\n};","map":{"version":3,"names":["PdfButton","name","components","props","modelValue","type","File","default","accept","String","multiple","Boolean","disabled","processing","emits","data","isDragging","methods","triggerFileInput","$refs","fileInput","click","handleFileSelect","event","file","target","files","$emit","value","handleDrop","dataTransfer","handleDragOver","handleDragLeave","removeFile","formatFileSize","bytes","k","sizes","i","Math","floor","log","round","pow"],"sources":["D:\\MyFile\\MyProject\\PDFCorrection\\frontend\\src\\components\\PdfUpload.vue"],"sourcesContent":["<template>\n  <div \n    class=\"pdf-upload\"\n    :class=\"{\n      'pdf-upload--drag-over': isDragging,\n      'pdf-upload--disabled': disabled\n    }\"\n    @drop.prevent=\"handleDrop\"\n    @dragover.prevent=\"handleDragOver\"\n    @dragleave=\"handleDragLeave\"\n  >\n    <input\n      ref=\"fileInput\"\n      type=\"file\"\n      :accept=\"accept\"\n      :multiple=\"multiple\"\n      @change=\"handleFileSelect\"\n      class=\"pdf-upload__input\"\n    >\n\n    <div v-if=\"!modelValue\" class=\"pdf-upload__prompt\">\n      <slot name=\"prompt\">\n        <svg class=\"pdf-upload__icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n          <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"></path>\n          <polyline points=\"17 8 12 3 7 8\"></polyline>\n          <line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\"></line>\n        </svg>\n        <p class=\"pdf-upload__text\">拖拽文件到此处，或者</p>\n        <PdfButton @click=\"triggerFileInput\" variant=\"primary\">\n          选择文件\n        </PdfButton>\n      </slot>\n    </div>\n\n    <div v-else class=\"pdf-upload__file-info\">\n      <slot name=\"file-info\" :file=\"modelValue\" :remove-file=\"removeFile\">\n        <svg class=\"pdf-upload__file-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n          <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"></path>\n          <polyline points=\"14 2 14 8 20 8\"></polyline>\n        </svg>\n        <div class=\"pdf-upload__file-details\">\n          <p class=\"pdf-upload__file-name\">{{ modelValue.name }}</p>\n          <p class=\"pdf-upload__file-size\">{{ formatFileSize(modelValue.size) }}</p>\n        </div>\n        <button \n          v-if=\"!disabled\"\n          class=\"pdf-upload__remove\"\n          @click=\"removeFile\"\n          :disabled=\"processing\"\n          aria-label=\"移除文件\"\n        >\n          ✕\n        </button>\n      </slot>\n    </div>\n  </div>\n</template>\n\n<script>\nimport PdfButton from './PdfButton.vue';\n\nexport default {\n  name: 'PdfUpload',\n  components: {\n    PdfButton\n  },\n  props: {\n    modelValue: {\n      type: [File, null],\n      default: null\n    },\n    accept: {\n      type: String,\n      default: '*'\n    },\n    multiple: {\n      type: Boolean,\n      default: false\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    processing: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['update:modelValue', 'file-select'],\n  data() {\n    return {\n      isDragging: false\n    };\n  },\n  methods: {\n    triggerFileInput() {\n      if (!this.disabled) {\n        this.$refs.fileInput.click();\n      }\n    },\n\n    handleFileSelect(event) {\n      const file = event.target.files[0];\n      if (file) {\n        this.$emit('update:modelValue', file);\n        this.$emit('file-select', file);\n      }\n      // 重置input的value，确保下次选择相同文件时也能触发change事件\n      event.target.value = '';\n    },\n\n    handleDrop(event) {\n      if (this.disabled) return;\n      \n      this.isDragging = false;\n      const file = event.dataTransfer.files[0];\n      if (file) {\n        this.$emit('update:modelValue', file);\n        this.$emit('file-select', file);\n      }\n    },\n\n    handleDragOver() {\n      if (!this.disabled) {\n        this.isDragging = true;\n      }\n    },\n\n    handleDragLeave() {\n      this.isDragging = false;\n    },\n\n    removeFile() {\n      if (!this.disabled && !this.processing) {\n        this.$refs.fileInput.value = '';\n        this.$emit('update:modelValue', null);\n      }\n    },\n\n    formatFileSize(bytes) {\n      if (bytes === 0) return '0 Bytes';\n      const k = 1024;\n      const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\n      return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];\n    }\n  }\n};\n</script>\n\n<style scoped>\n.pdf-upload {\n  border: 2px dashed #ddd;\n  border-radius: 12px;\n  padding: 40px;\n  text-align: center;\n  transition: all 0.3s ease;\n  background: #fafafa;\n  position: relative;\n}\n\n.pdf-upload--drag-over {\n  border-color: #667eea;\n  background: #f0f4ff;\n}\n\n.pdf-upload--disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.pdf-upload__input {\n  display: none;\n}\n\n.pdf-upload__icon {\n  width: 64px;\n  height: 64px;\n  color: #667eea;\n  stroke-width: 2;\n  margin: 0 auto 20px;\n}\n\n.pdf-upload__text {\n  color: #666;\n  font-size: 1rem;\n  margin-bottom: 20px;\n}\n\n.pdf-upload__file-info {\n  display: flex;\n  align-items: center;\n  gap: 15px;\n  background: white;\n  padding: 20px;\n  border-radius: 8px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n.pdf-upload__file-icon {\n  width: 40px;\n  height: 40px;\n  color: #667eea;\n  stroke-width: 2;\n  flex-shrink: 0;\n}\n\n.pdf-upload__file-details {\n  flex: 1;\n  text-align: left;\n}\n\n.pdf-upload__file-name {\n  font-weight: 600;\n  color: #333;\n  margin-bottom: 5px;\n  word-break: break-all;\n}\n\n.pdf-upload__file-size {\n  color: #999;\n  font-size: 0.875rem;\n}\n\n.pdf-upload__remove {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  border: none;\n  background: #ff4444;\n  color: white;\n  cursor: pointer;\n  font-size: 1.2rem;\n  transition: all 0.3s;\n  flex-shrink: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.pdf-upload__remove:hover:not(:disabled) {\n  background: #cc0000;\n  transform: scale(1.1);\n}\n\n.pdf-upload__remove:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n</style>"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}