{"ast":null,"code":"import { createElementVNode as _createElementVNode, renderSlot as _renderSlot, openBlock as _openBlock, createElementBlock as _createElementBlock, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createCommentVNode as _createCommentVNode, toDisplayString as _toDisplayString, withModifiers as _withModifiers, normalizeClass as _normalizeClass, createStaticVNode as _createStaticVNode } from \"vue\";\nconst _hoisted_1 = [\"accept\", \"multiple\"];\nconst _hoisted_2 = {\n  key: 0,\n  class: \"pdf-upload__prompt\"\n};\nconst _hoisted_3 = {\n  key: 1,\n  class: \"pdf-upload__file-info\"\n};\nconst _hoisted_4 = {\n  class: \"pdf-upload__file-details\"\n};\nconst _hoisted_5 = {\n  class: \"pdf-upload__file-name\"\n};\nconst _hoisted_6 = {\n  class: \"pdf-upload__file-size\"\n};\nconst _hoisted_7 = [\"disabled\"];\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_PdfButton = _resolveComponent(\"PdfButton\");\n  return _openBlock(), _createElementBlock(\"div\", {\n    class: _normalizeClass([\"pdf-upload\", {\n      'pdf-upload--drag-over': $data.isDragging,\n      'pdf-upload--disabled': $props.disabled\n    }]),\n    onDrop: _cache[2] || (_cache[2] = _withModifiers((...args) => $options.handleDrop && $options.handleDrop(...args), [\"prevent\"])),\n    onDragover: _cache[3] || (_cache[3] = _withModifiers((...args) => $options.handleDragOver && $options.handleDragOver(...args), [\"prevent\"])),\n    onDragleave: _cache[4] || (_cache[4] = (...args) => $options.handleDragLeave && $options.handleDragLeave(...args))\n  }, [_createElementVNode(\"input\", {\n    ref: \"fileInput\",\n    type: \"file\",\n    accept: $props.accept,\n    multiple: $props.multiple,\n    onChange: _cache[0] || (_cache[0] = (...args) => $options.handleFileSelect && $options.handleFileSelect(...args)),\n    class: \"pdf-upload__input\"\n  }, null, 40 /* PROPS, NEED_HYDRATION */, _hoisted_1), !$props.modelValue ? (_openBlock(), _createElementBlock(\"div\", _hoisted_2, [_renderSlot(_ctx.$slots, \"prompt\", {}, () => [_cache[6] || (_cache[6] = _createStaticVNode(\"<svg class=\\\"pdf-upload__icon\\\" viewBox=\\\"0 0 24 24\\\" fill=\\\"none\\\" stroke=\\\"currentColor\\\" data-v-2b32b7da><path d=\\\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\\\" data-v-2b32b7da></path><polyline points=\\\"17 8 12 3 7 8\\\" data-v-2b32b7da></polyline><line x1=\\\"12\\\" y1=\\\"3\\\" x2=\\\"12\\\" y2=\\\"15\\\" data-v-2b32b7da></line></svg><p class=\\\"pdf-upload__text\\\" data-v-2b32b7da>拖拽文件到此处，或者</p>\", 2)), _createVNode(_component_PdfButton, {\n    onClick: $options.triggerFileInput,\n    variant: \"primary\"\n  }, {\n    default: _withCtx(() => [...(_cache[5] || (_cache[5] = [_createTextVNode(\" 选择文件 \", -1 /* CACHED */)]))]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClick\"])], true)])) : (_openBlock(), _createElementBlock(\"div\", _hoisted_3, [_renderSlot(_ctx.$slots, \"file-info\", {\n    file: $props.modelValue,\n    removeFile: $options.removeFile\n  }, () => [_cache[7] || (_cache[7] = _createElementVNode(\"svg\", {\n    class: \"pdf-upload__file-icon\",\n    viewBox: \"0 0 24 24\",\n    fill: \"none\",\n    stroke: \"currentColor\"\n  }, [_createElementVNode(\"path\", {\n    d: \"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"\n  }), _createElementVNode(\"polyline\", {\n    points: \"14 2 14 8 20 8\"\n  })], -1 /* CACHED */)), _createElementVNode(\"div\", _hoisted_4, [_createElementVNode(\"p\", _hoisted_5, _toDisplayString($props.modelValue.name), 1 /* TEXT */), _createElementVNode(\"p\", _hoisted_6, _toDisplayString($options.formatFileSize($props.modelValue.size)), 1 /* TEXT */)]), !$props.disabled ? (_openBlock(), _createElementBlock(\"button\", {\n    key: 0,\n    class: \"pdf-upload__remove\",\n    onClick: _cache[1] || (_cache[1] = (...args) => $options.removeFile && $options.removeFile(...args)),\n    disabled: $props.processing,\n    \"aria-label\": \"移除文件\"\n  }, \" ✕ \", 8 /* PROPS */, _hoisted_7)) : _createCommentVNode(\"v-if\", true)], true)]))], 34 /* CLASS, NEED_HYDRATION */);\n}","map":{"version":3,"names":["class","_createElementBlock","_normalizeClass","$data","isDragging","$props","disabled","onDrop","_cache","_withModifiers","args","$options","handleDrop","onDragover","handleDragOver","onDragleave","handleDragLeave","_createElementVNode","ref","type","accept","multiple","onChange","handleFileSelect","modelValue","_hoisted_2","_renderSlot","_ctx","$slots","_createVNode","_component_PdfButton","onClick","triggerFileInput","variant","_hoisted_3","file","removeFile","viewBox","fill","stroke","d","points","_hoisted_4","_hoisted_5","_toDisplayString","name","_hoisted_6","formatFileSize","size","processing","_hoisted_7"],"sources":["D:\\MyFile\\MyProject\\PDFCorrection\\frontend\\src\\components\\PdfUpload.vue"],"sourcesContent":["<template>\n  <div \n    class=\"pdf-upload\"\n    :class=\"{\n      'pdf-upload--drag-over': isDragging,\n      'pdf-upload--disabled': disabled\n    }\"\n    @drop.prevent=\"handleDrop\"\n    @dragover.prevent=\"handleDragOver\"\n    @dragleave=\"handleDragLeave\"\n  >\n    <input\n      ref=\"fileInput\"\n      type=\"file\"\n      :accept=\"accept\"\n      :multiple=\"multiple\"\n      @change=\"handleFileSelect\"\n      class=\"pdf-upload__input\"\n    >\n\n    <div v-if=\"!modelValue\" class=\"pdf-upload__prompt\">\n      <slot name=\"prompt\">\n        <svg class=\"pdf-upload__icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n          <path d=\"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4\"></path>\n          <polyline points=\"17 8 12 3 7 8\"></polyline>\n          <line x1=\"12\" y1=\"3\" x2=\"12\" y2=\"15\"></line>\n        </svg>\n        <p class=\"pdf-upload__text\">拖拽文件到此处，或者</p>\n        <PdfButton @click=\"triggerFileInput\" variant=\"primary\">\n          选择文件\n        </PdfButton>\n      </slot>\n    </div>\n\n    <div v-else class=\"pdf-upload__file-info\">\n      <slot name=\"file-info\" :file=\"modelValue\" :remove-file=\"removeFile\">\n        <svg class=\"pdf-upload__file-icon\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\">\n          <path d=\"M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z\"></path>\n          <polyline points=\"14 2 14 8 20 8\"></polyline>\n        </svg>\n        <div class=\"pdf-upload__file-details\">\n          <p class=\"pdf-upload__file-name\">{{ modelValue.name }}</p>\n          <p class=\"pdf-upload__file-size\">{{ formatFileSize(modelValue.size) }}</p>\n        </div>\n        <button \n          v-if=\"!disabled\"\n          class=\"pdf-upload__remove\"\n          @click=\"removeFile\"\n          :disabled=\"processing\"\n          aria-label=\"移除文件\"\n        >\n          ✕\n        </button>\n      </slot>\n    </div>\n  </div>\n</template>\n\n<script>\nimport PdfButton from './PdfButton.vue';\n\nexport default {\n  name: 'PdfUpload',\n  components: {\n    PdfButton\n  },\n  props: {\n    modelValue: {\n      type: [File, null],\n      default: null\n    },\n    accept: {\n      type: String,\n      default: '*'\n    },\n    multiple: {\n      type: Boolean,\n      default: false\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    processing: {\n      type: Boolean,\n      default: false\n    }\n  },\n  emits: ['update:modelValue', 'file-select'],\n  data() {\n    return {\n      isDragging: false\n    };\n  },\n  methods: {\n    triggerFileInput() {\n      if (!this.disabled) {\n        this.$refs.fileInput.click();\n      }\n    },\n\n    handleFileSelect(event) {\n      const file = event.target.files[0];\n      if (file) {\n        this.$emit('update:modelValue', file);\n        this.$emit('file-select', file);\n      }\n      // 重置input的value，确保下次选择相同文件时也能触发change事件\n      event.target.value = '';\n    },\n\n    handleDrop(event) {\n      if (this.disabled) return;\n      \n      this.isDragging = false;\n      const file = event.dataTransfer.files[0];\n      if (file) {\n        this.$emit('update:modelValue', file);\n        this.$emit('file-select', file);\n      }\n    },\n\n    handleDragOver() {\n      if (!this.disabled) {\n        this.isDragging = true;\n      }\n    },\n\n    handleDragLeave() {\n      this.isDragging = false;\n    },\n\n    removeFile() {\n      if (!this.disabled && !this.processing) {\n        this.$refs.fileInput.value = '';\n        this.$emit('update:modelValue', null);\n      }\n    },\n\n    formatFileSize(bytes) {\n      if (bytes === 0) return '0 Bytes';\n      const k = 1024;\n      const sizes = ['Bytes', 'KB', 'MB', 'GB'];\n      const i = Math.floor(Math.log(bytes) / Math.log(k));\n      return Math.round(bytes / Math.pow(k, i) * 100) / 100 + ' ' + sizes[i];\n    }\n  }\n};\n</script>\n\n<style scoped>\n.pdf-upload {\n  border: 2px dashed #ddd;\n  border-radius: 12px;\n  padding: 40px;\n  text-align: center;\n  transition: all 0.3s ease;\n  background: #fafafa;\n  position: relative;\n}\n\n.pdf-upload--drag-over {\n  border-color: #667eea;\n  background: #f0f4ff;\n}\n\n.pdf-upload--disabled {\n  opacity: 0.6;\n  cursor: not-allowed;\n}\n\n.pdf-upload__input {\n  display: none;\n}\n\n.pdf-upload__icon {\n  width: 64px;\n  height: 64px;\n  color: #667eea;\n  stroke-width: 2;\n  margin: 0 auto 20px;\n}\n\n.pdf-upload__text {\n  color: #666;\n  font-size: 1rem;\n  margin-bottom: 20px;\n}\n\n.pdf-upload__file-info {\n  display: flex;\n  align-items: center;\n  gap: 15px;\n  background: white;\n  padding: 20px;\n  border-radius: 8px;\n  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);\n}\n\n.pdf-upload__file-icon {\n  width: 40px;\n  height: 40px;\n  color: #667eea;\n  stroke-width: 2;\n  flex-shrink: 0;\n}\n\n.pdf-upload__file-details {\n  flex: 1;\n  text-align: left;\n}\n\n.pdf-upload__file-name {\n  font-weight: 600;\n  color: #333;\n  margin-bottom: 5px;\n  word-break: break-all;\n}\n\n.pdf-upload__file-size {\n  color: #999;\n  font-size: 0.875rem;\n}\n\n.pdf-upload__remove {\n  width: 32px;\n  height: 32px;\n  border-radius: 50%;\n  border: none;\n  background: #ff4444;\n  color: white;\n  cursor: pointer;\n  font-size: 1.2rem;\n  transition: all 0.3s;\n  flex-shrink: 0;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n\n.pdf-upload__remove:hover:not(:disabled) {\n  background: #cc0000;\n  transform: scale(1.1);\n}\n\n.pdf-upload__remove:disabled {\n  opacity: 0.5;\n  cursor: not-allowed;\n}\n</style>"],"mappings":";;;;EAoB4BA,KAAK,EAAC;;;;EAclBA,KAAK,EAAC;;;EAMTA,KAAK,EAAC;AAA0B;;EAChCA,KAAK,EAAC;AAAuB;;EAC7BA,KAAK,EAAC;AAAuB;;;;uBAzCxCC,mBAAA,CAsDM;IArDJD,KAAK,EAAAE,eAAA,EAAC,YAAY;+BACuBC,KAAA,CAAAC,UAAU;8BAAgCC,MAAA,CAAAC;;IAIlFC,MAAI,EAAAC,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAUC,QAAA,CAAAC,UAAA,IAAAD,QAAA,CAAAC,UAAA,IAAAF,IAAA,CAAU;IACxBG,UAAQ,EAAAL,MAAA,QAAAA,MAAA,MAAAC,cAAA,KAAAC,IAAA,KAAUC,QAAA,CAAAG,cAAA,IAAAH,QAAA,CAAAG,cAAA,IAAAJ,IAAA,CAAc;IAChCK,WAAS,EAAAP,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEC,QAAA,CAAAK,eAAA,IAAAL,QAAA,CAAAK,eAAA,IAAAN,IAAA,CAAe;MAE3BO,mBAAA,CAOC;IANCC,GAAG,EAAC,WAAW;IACfC,IAAI,EAAC,MAAM;IACVC,MAAM,EAAEf,MAAA,CAAAe,MAAM;IACdC,QAAQ,EAAEhB,MAAA,CAAAgB,QAAQ;IAClBC,QAAM,EAAAd,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEC,QAAA,CAAAY,gBAAA,IAAAZ,QAAA,CAAAY,gBAAA,IAAAb,IAAA,CAAgB;IACzBV,KAAK,EAAC;yDAGIK,MAAA,CAAAmB,UAAU,I,cAAtBvB,mBAAA,CAYM,OAZNwB,UAYM,GAXJC,WAAA,CAUOC,IAAA,CAAAC,MAAA,gBAVP,MAUO,C,mbAHLC,YAAA,CAEYC,oBAAA;IAFAC,OAAK,EAAEpB,QAAA,CAAAqB,gBAAgB;IAAEC,OAAO,EAAC;;sBAAU,MAEvD,KAAAzB,MAAA,QAAAA,MAAA,O,iBAFuD,QAEvD,mB;;6DAIJP,mBAAA,CAoBM,OApBNiC,UAoBM,GAnBJR,WAAA,CAkBOC,IAAA,CAAAC,MAAA;IAlBiBO,IAAI,EAAE9B,MAAA,CAAAmB,UAAU;IAAGY,UAAW,EAAEzB,QAAA,CAAAyB;KAAxD,MAkBO,C,0BAjBLnB,mBAAA,CAGM;IAHDjB,KAAK,EAAC,uBAAuB;IAACqC,OAAO,EAAC,WAAW;IAACC,IAAI,EAAC,MAAM;IAACC,MAAM,EAAC;MACxEtB,mBAAA,CAA4E;IAAtEuB,CAAC,EAAC;EAA4D,IACpEvB,mBAAA,CAA6C;IAAnCwB,MAAM,EAAC;EAAgB,G,qBAEnCxB,mBAAA,CAGM,OAHNyB,UAGM,GAFJzB,mBAAA,CAA0D,KAA1D0B,UAA0D,EAAAC,gBAAA,CAAtBvC,MAAA,CAAAmB,UAAU,CAACqB,IAAI,kBACnD5B,mBAAA,CAA0E,KAA1E6B,UAA0E,EAAAF,gBAAA,CAAtCjC,QAAA,CAAAoC,cAAc,CAAC1C,MAAA,CAAAmB,UAAU,CAACwB,IAAI,kB,IAG3D3C,MAAA,CAAAC,QAAQ,I,cADjBL,mBAAA,CAQS;;IANPD,KAAK,EAAC,oBAAoB;IACzB+B,OAAK,EAAAvB,MAAA,QAAAA,MAAA,UAAAE,IAAA,KAAEC,QAAA,CAAAyB,UAAA,IAAAzB,QAAA,CAAAyB,UAAA,IAAA1B,IAAA,CAAU;IACjBJ,QAAQ,EAAED,MAAA,CAAA4C,UAAU;IACrB,YAAU,EAAC;KACZ,KAED,iBAAAC,UAAA,K","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}